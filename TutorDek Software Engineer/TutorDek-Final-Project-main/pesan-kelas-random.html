<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    
    <title>Pesan Kelas</title>
    <link rel="stylesheet" href="pesan-kelas.css" />
    <link rel="stylesheet" href="./CSS/global.css" />
    <link rel="stylesheet" href="./CSS/tugas-akhir.css"/>
    <link rel="stylesheet" href="./CSS/fiturOverlay.css"/>
    <link rel="stylesheet" href="./CSS/mainFunction.css"/>
    <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
    />
    <link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap"
    />
    <link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=DM Sans:wght@700&display=swap"
    />
    <link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Satoshi:wght@700&display=swap"
    />
    <link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Raleway:wght@700;800;900&display=swap"
    />
  </head>

  <body>
    <div id ="particles-js">
      <div class="pesan-navbar">
        <button type="button" class="btn back" onclick=" location.href='landing-page.html'"><</button>
      </div>
      
      <div class="container text-center">
        <img class="asset-icon6" alt="" src="./public/asset5.svg" style="z-index: -1;"/>
        <div class="progress" role="progressbar" aria-label="Animated striped example" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
          <div class="progress-bar progress-bar-striped progress-bar-animated" style="width: 0%"></div>
        </div>
        <div class="container text-center page" style="display: block;">
          <h2>Jenjang Kelas</h2>
          <p>Pilih jenjang kelas yang kamu inginkan</p>
    
            <select class="form-select" aria-label="Default select example">
              <option selected>Pilih Kelas</option>
              <option value="SD">SD</option>
              <option value="SMP">SMP</option>
              <option value="SMA">SMA</option>
            </select>
            
            <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
            </div>
        </div>
  
        <div class="container text-center page" style="display: none;">
          <h2>Mata Pelajaran & Materi</h2>
          <p>Pilih Mata Pelajaran dan Materi</p>
          <select class="form-lesson" aria-label="Default select example">
            <option selected>Pilih Pelajaran</option>
            <option value="Matematika">Matematika</option>
            <option value="Inggris">Inggris</option>
            <option value="Sains">Sains</option>
          </select>
  
          <select class="form-material" aria-label="Default select example">
            <option selected>Pilih Materi</option>
          </select>
        </div>
  
        <div id ="containerMap" class="container text-center page" style="display: none;">
          <h2>Tutor</h2>
          <p>Sedang mencari tutor terdekat...</p>
          <div id="map"></div>
          <script async
          src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDxhhn5N4cLnEzpfxTKIG9ewIVBP6sgdA4&callback=initMap&libraries=geometry">
          </script>
          <script>
          // Initialize and add the map
          function initMap() {
              // The location of center
              const center = {lat: -6.200000, lng: 106.816666};
              // The map, centered at center
              const map = new google.maps.Map(
                  document.getElementById('map'), {zoom: 12, center: center});
      
              // The locations of the markers
              const markerLocations = Array.from({length: 12}, () => ({
                lat: center.lat + (Math.random() - 0.5) * 0.1,
                lng: center.lng + (Math.random() - 0.5) * 0.1
            }));
      
              // Array to hold all the markers
              const markers = [];
      
              // The markers, positioned at markerLocations
              markerLocations.forEach(location => {
                  const marker = new google.maps.Marker({
                      position: location,
                      map: map,
                      icon: {
                          url: "./public/teacherMale.png", // URL of the image
                          scaledSize: new google.maps.Size(30, 30) // sets the size of the icon
                      }
                  });
                  markers.push(marker);
              });
      
              // Your location
              const yourLocation = new google.maps.LatLng(-6.201935, 106.781525);
              const marker = new google.maps.Marker({
                  position: yourLocation,
                  map: map
              });
      
              const infowindow = new google.maps.InfoWindow({
                  content: "Your location:"
              });
      
              marker.addListener("click", () => {
                  infowindow.open(map, marker);
              });
      
              // Calculate the shortest distance
              let shortestDistance = Infinity;
              let closestLocation;
              let closestMarker;
              markerLocations.forEach((location, index) => {
                  const distance = google.maps.geometry.spherical.computeDistanceBetween(yourLocation, new google.maps.LatLng(location.lat, location.lng));
                  if (distance < shortestDistance) {
                      shortestDistance = distance;
                      closestLocation = location;
                      closestMarker = markers[index];
                  }
              });
      
              console.log(`The shortest distance is ${shortestDistance} meters.`);
              console.log(`The closest location is at latitude ${closestLocation.lat} and longitude ${closestLocation.lng}.`);
      
              // Wait for 5 seconds, then zoom in and remove other markers
              map.addListener('click', function() {
                setTimeout(() => {
                    // Zoom in
                    map.setZoom(15);
                    map.setCenter(closestLocation);
        
                    // Remove other markers
                    markers.forEach(marker => {
                        if (marker !== closestMarker) {
                            marker.setMap(null);
                        }
                    });
                    showTeacherPopup();
                }, 5000);
            });

            function showTeacherPopup() {
              // Change the <p> tag
              document.querySelector('#containerMap p').textContent = 'Teacher Founded!';
          
              // Create the popup
              const popup = document.createElement('div');
              popup.innerHTML = `
                  <div class="card2" style="align-items: center; margin-top: 10px;">
                      <div class="accent"></div>
                      <img class="image-icon2" alt="" src="./public/image2@2x.png" />
                      <div class="name1">
                          <div class="title5">
                              <div class="anita-frens-hatipuan">Anita Frens Hatipuan</div>
                              <div class="description">Matematika - SMA</div>
                          </div>
                          <div class="title3">
                              <button class="button4" onclick="togglePopup1()">
                                  <img class="vuesaxlineararrow-left-icon" alt="" src="./public/vuesaxlineararrowright1.svg" />
                              </button>
                          </div>
                      </div>
                      <div class="button5">
                          <img class="button-child" alt="" src="./public/star-1.svg" />
                          <div class="div">4.8</div>
                      </div>
                  </div>
              `;
              document.querySelector('#containerMap').appendChild(popup);
            }
          }


          </script>
  
        </div>
  
        <div class="container text-center page" style="display: none;">
          <h2>Metode</h2>
          <p>Pilih Metode Pembelajaran</p>
          <select class="form-place" aria-label="Default select example">
            <option selected>Select Place</option>
            <option value="Online">Online</option>
            <option value="Offline">Offline</option>
          </select>
          <div id="offlineFormControl" class="mb-3" style="display: none;">
            <label for="exampleFormControlInput1" class="form-label">Alamat</label>
            <input type="alamat" class="form-alamat" id="exampleFormControlInput1" placeholder="Alamat">
          </div>
          <div id="onlineFormControl" class="mb-3" style="display: none;">
            <label for="exampleFormControlInput2" class="form-label">Date</label>
            <input type="date" class="form-date" id="exampleFormControlInput2">
            <label for="exampleFormControlInput3" class="form-label">Time</label>
            <input type="time" class="form-time" id="exampleFormControlInput3">
          </div>  
        </div>
  
  
  
  
        <div class="container text-center page" style="display: none;">
          <div style="display: flex; justify-content: space-between;">
            <div style="margin-left: 30px;">
              <div id="offlineFormControl" class="mb-3">
                <label for="exampleFormControlInput1" class="form-label">Email</label>
                <input type="email" class="form-email" id="exampleFormControlInput1" placeholder="Email">
              </div>
              <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle full-width-btn" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                  Metode Pembayaran
                </button>
                <ul class="dropdown-menu">
                  <a style="color: blue; text-align: center;">E-Wallet :</a>
                  <li><a class="dropdown-item" href="#">Gopay</a></li>
                  <li><a class="dropdown-item" href="#">Ovo</a></li>
                  <a style="color: blue; text-align: center;">Transfer Bank / Debit :</a>
                  <li><a class="dropdown-item" href="#">Mandiri</a></li>
                  <li><a class="dropdown-item" href="#">BRI</a></li>
                  <li><a class="dropdown-item" href="#">BCA</a></li>
                  <a style="color: blue; text-align: center;">Kredit :</a>
                  <li><a class="dropdown-item" href="#">Visa</a></li>
                  <li><a class="dropdown-item" href="#">Mastercard</a></li>
                </ul>
              </div>
              <div id="ewalletFormControl" class="mb-3" style="display: none; margin-top: 20px;">
                <label for="exampleFormControlInput2" class="form-label" style="    border: 1px solid #0E4A87;
                border-radius: .25rem;
                background-color: #0E4A87;">Nomor pembayaran: </label>
                <input type="email" class="form-pembayaran-ewallet" id="exampleFormControlInput2">
            </div>
            <div id="debitFormControl" class="mb-3" style="display: none; margin-top: 20px;">
                <label for="exampleFormControlInput3" class="form-label" style="    border: 1px solid #0E4A87;
                border-radius: .25rem;
                background-color: #0E4A87;">Nomor debit: </label>
                <input type="email" class="form-pembayaran-debit" id="exampleFormControlInput3">
            </div>
            </div>
  
            <ul class="list-group list-group-flush">
              <li class="list-group-item" id="selectedClass"></li>
              <li class="list-group-item" id="selectedGrade"></li>
              <li class="list-group-item" id="selectedLesson"></li>
              <li class="list-group-item" id="selectedMaterial"></li>
              <li class="list-group-item" id="selectedTeacher"></li>
              <li class="list-group-item" id="selectedPlace"></li>
              <li class="list-group-item" id="selectedDetail"></li>
  
            </ul>
          </div>
  
          <button type="button" class="btn selesai" onclick="finishProcess()">Selesaikan Proses</button>
        </div>
  
  
        <div style="display: flex; flex-direction: row; justify-content: center; margin-bottom: 20px;">
          <button type="button" class="btn btn-primary"><</button>
          <button type="button" class="btn btn-primary">></button>
        </div>
  
  
      
      </div>
  
    
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    </div>
    <script src="Javascript/particles.js"></script>
    <script src="Javascript/app.js"></script>
    
  </body>
  <script src="Javascript/class-random.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

  <script>
    $(document).ready(function() {
        $('.form-place').change(function() {
            if ($(this).val() == 'Offline') {
                $('#offlineFormControl').show();
                $('#onlineFormControl').hide();
            } else if ($(this).val() == 'Online') {
                $('#onlineFormControl').show();
                $('#offlineFormControl').hide();
            }
        });
    });

    $(document).ready(function() {
      $('.dropdown-item').click(function(e) {
          e.preventDefault();
          var selectedOption = $(this).text();
          $('.dropdown-toggle').text(selectedOption);
      });
    });

  window.onload = function() {
    var dropdownItems = document.querySelectorAll('.dropdown-item');
    dropdownItems.forEach(function(item) {
        item.addEventListener('click', function() {
            // Remove 'active' class from all items
            dropdownItems.forEach(function(i) {
                i.classList.remove('active');
            });
            // Add 'active' class to the clicked item
            this.classList.add('active');
        });
    });
  }

    function finishProcess() {
      var email = document.querySelector('.form-email').value;
      var paymentMethod = document.querySelector('.dropdown-menu .dropdown-item.active');
  
      if (email === '' || paymentMethod === null) {
          console.log(email, paymentMethod)
          alert("Please fill in the email and select a payment method.");
          return;
      }
  
      alert("Proses Selesai!");
      window.location.href = "landing-page.html"; // replace with your page URL
  }
  </script>
</html>